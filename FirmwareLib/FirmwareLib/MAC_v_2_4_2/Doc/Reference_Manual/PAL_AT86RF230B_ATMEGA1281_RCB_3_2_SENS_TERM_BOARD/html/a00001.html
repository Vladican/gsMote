<!$Id: atmel-header.html 19278 2009-11-23 09:15:44Z sschneid $>
<html>
 <head>
  <meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
  <title>AVR2025: IEEE 802.15.4 MAC Reference Manual</title>
  <link href="doxygen.css" rel="stylesheet" type="text/css">
</head>
<body>

<table width="100%" height="10%" bgcolor="#FFFFFF">
  <tr>
    <td colspan="2"><p><A href=http://www.atmel.com ><img src="../..//graphics//atmel.jpg"/ border=0></A></p><br /></td>
    <td colspan="2"> <strong><font face="Helvetica" color="#000000" size="+3">Microcontroller Wireless Solutions</font></strong></td>
    <td colspan="2"><p><A href=http://www.atmel.com/products/AVR><img src="../..//graphics//AVR_logo_blue.gif"/ border=0></A></p><br /></td>
  </tr>
  <tr>
    <td colspan="6" height="1" background="../..//graphics//blue.gif"></td>
  </tr>
</table>
<!-- Generated by Doxygen 1.5.6 -->
<div class="contents">
<h1>pal.c File Reference</h1><hr><a name="_details"></a><h2>Detailed Description</h2>
General PAL functions for AVR 8-Bit MCUs. 
<p>
This file implements generic PAL function and performs USB related handling if required for AVR 8-Bit MCUs.<p>
<dl class="rcs" compact><dt><b>Id</b></dt><dd><a class="el" href="a00001.html" title="General PAL functions for AVR 8-Bit MCUs.">pal.c</a> 19923 2010-01-14 11:00:19Z sschneid </dd></dl>
<p>
<dl class="author" compact><dt><b>Author:</b></dt><dd>Atmel Corporation: <a href="http://www.atmel.com">http://www.atmel.com</a> <p>
Support email: <a href="mailto:avr@atmel.com">avr@atmel.com</a> </dd></dl>

<p>Definition in file <a class="el" href="a00013.html">pal.c</a>.</p>

<p>

<p>
<a href="a00013.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00001.html#ab1d1ef57c1fe9a22c1781cf5706bf8f">mcu_clock_init</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00001.html#80779665aa57408f41636b7b0a55e2dc">pal_alert</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">retval_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00001.html#7ba90b2aacd564c33138bf6902bd8bca">pal_init</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">retval_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00001.html#cdfefdb2d0670ac148ba156199f62178">pal_ps_get</a> (<a class="el" href="a00002.html#04c3479332019daef5ff782f68d7a0e3">ps_type_t</a> ps_type, uint16_t start_addr, uint16_t length, void *value)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">retval_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00001.html#4e10cc025eb8507fe5f176e21336da37">pal_ps_set</a> (uint16_t start_addr, uint16_t length, void *value)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00001.html#057e433e0200eb99b5f67c5336dbc323">pal_task</a> (void)</td></tr>

<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">volatile uint16_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00001.html#78d2fd18666afec116f176d46debb4e7">sys_time</a></td></tr>

</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="ab1d1ef57c1fe9a22c1781cf5706bf8f"></a><!-- doxytag: member="pal.c::mcu_clock_init" ref="ab1d1ef57c1fe9a22c1781cf5706bf8f" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void mcu_clock_init           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialize the system clock. 
<p>
This function sets the system clock by enabling the internal RC oscillator with the proper prescaler (if available). Ensure that CKDIV8 fuse does not affect the system clock prescaler. 
<p>Definition at line <a class="el" href="a00013.html#l00219">219</a> of file <a class="el" href="a00013.html">pal.c</a>.</p>

<p>References <a class="el" href="a00018.html#l00294">ENTER_CRITICAL_REGION</a>, and <a class="el" href="a00018.html#l00297">LEAVE_CRITICAL_REGION</a>.</p>

<p>Referenced by <a class="el" href="a00013.html#l00062">pal_init()</a>.</p>

</div>
</div><p>
<a class="anchor" name="80779665aa57408f41636b7b0a55e2dc"></a><!-- doxytag: member="pal.c::pal_alert" ref="80779665aa57408f41636b7b0a55e2dc" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pal_alert           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Alert indication. 
<p>
This Function can be used by any application to indicate an error condition. The function is blocking and does never return. 
<p>Definition at line <a class="el" href="a00013.html#l00187">187</a> of file <a class="el" href="a00013.html">pal.c</a>.</p>

<p>References <a class="el" href="a00018.html#l00573">ALERT_INDICATE</a>, <a class="el" href="a00018.html#l00567">ALERT_INIT</a>, and <a class="el" href="a00021.html#l00631">pal_timer_delay()</a>.</p>

</div>
</div><p>
<a class="anchor" name="7ba90b2aacd564c33138bf6902bd8bca"></a><!-- doxytag: member="pal.c::pal_init" ref="7ba90b2aacd564c33138bf6902bd8bca" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">retval_t pal_init           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialization of PAL. 
<p>
This function initializes the PAL. This includes selecting the proper system clock source, initializing the GPIOs, the interface to the transceiver, and the timers.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>MAC_SUCCESS if PAL initialization is successful, FAILURE otherwise </dd></dl>

<p>Definition at line <a class="el" href="a00013.html#l00062">62</a> of file <a class="el" href="a00013.html">pal.c</a>.</p>

<p>References <a class="el" href="a00017.html#l00227">gpio_init()</a>, <a class="el" href="a00024.html#l00039">MAC_SUCCESS</a>, <a class="el" href="a00013.html#l00219">mcu_clock_init()</a>, <a class="el" href="a00021.html#l00554">timer_init()</a>, and <a class="el" href="a00022.html#l00075">trx_interface_init()</a>.</p>

</div>
</div><p>
<a class="anchor" name="cdfefdb2d0670ac148ba156199f62178"></a><!-- doxytag: member="pal.c::pal_ps_get" ref="cdfefdb2d0670ac148ba156199f62178" args="(ps_type_t ps_type, uint16_t start_addr, uint16_t length, void *value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">retval_t pal_ps_get           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00002.html#04c3479332019daef5ff782f68d7a0e3">ps_type_t</a>&nbsp;</td>
          <td class="paramname"> <em>ps_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>start_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>value</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get data from persistence storage. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>ps_type</em>&nbsp;</td><td>Persistence storage type </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>start_addr</em>&nbsp;</td><td>Start offset within EEPROM </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>length</em>&nbsp;</td><td>Number of bytes to read from EEPROM </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>value</em>&nbsp;</td><td>Data from persistence storage</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>MAC_SUCCESS if everything went OK else FAILURE </dd></dl>

<p>Definition at line <a class="el" href="a00013.html#l00106">106</a> of file <a class="el" href="a00013.html">pal.c</a>.</p>

<p>References <a class="el" href="a00015.html#l00135">EXTERN_EEPROM</a>, <a class="el" href="a00024.html#l00043">FAILURE</a>, <a class="el" href="a00015.html#l00133">INTERN_EEPROM</a>, <a class="el" href="a00024.html#l00058">MAC_INVALID_PARAMETER</a>, and <a class="el" href="a00024.html#l00039">MAC_SUCCESS</a>.</p>

</div>
</div><p>
<a class="anchor" name="4e10cc025eb8507fe5f176e21336da37"></a><!-- doxytag: member="pal.c::pal_ps_set" ref="4e10cc025eb8507fe5f176e21336da37" args="(uint16_t start_addr, uint16_t length, void *value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">retval_t pal_ps_set           </td>
          <td>(</td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>start_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>value</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Write data to persistence storage. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>start_addr</em>&nbsp;</td><td>Start address offset within EEPROM </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>length</em>&nbsp;</td><td>Number of bytes to be written to EEPROM </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>value</em>&nbsp;</td><td>Data to persistence storage</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>MAC_SUCCESS if everything went OK else FAILURE </dd></dl>

<p>Definition at line <a class="el" href="a00013.html#l00153">153</a> of file <a class="el" href="a00013.html">pal.c</a>.</p>

<p>References <a class="el" href="a00024.html#l00043">FAILURE</a>, and <a class="el" href="a00024.html#l00039">MAC_SUCCESS</a>.</p>

</div>
</div><p>
<a class="anchor" name="057e433e0200eb99b5f67c5336dbc323"></a><!-- doxytag: member="pal.c::pal_task" ref="057e433e0200eb99b5f67c5336dbc323" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pal_task           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Services timer and sio handler. 
<p>
This function calls sio &amp; timer handling functions. 
<p>Definition at line <a class="el" href="a00013.html#l00079">79</a> of file <a class="el" href="a00013.html">pal.c</a>.</p>

<p>References <a class="el" href="a00021.html#l00117">timer_service()</a>, and <a class="el" href="a00023.html#l00339">usb_handler()</a>.</p>

</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="78d2fd18666afec116f176d46debb4e7"></a><!-- doxytag: member="pal.c::sys_time" ref="78d2fd18666afec116f176d46debb4e7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint16_t <a class="el" href="a00001.html#78d2fd18666afec116f176d46debb4e7">sys_time</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This is the most significant part of the system time. The least one is timer1 (TCNT1) itself. Exported since input capture units might want to know about this value as well. 
<p>Definition at line <a class="el" href="a00013.html#l00045">45</a> of file <a class="el" href="a00013.html">pal.c</a>.</p>

<p>Referenced by <a class="el" href="a00021.html#l00733">gettime()</a>, <a class="el" href="a00017.html#l00060">pal_trx_read_timestamp()</a>, <a class="el" href="a00021.html#l00762">prog_ocr()</a>, and <a class="el" href="a00021.html#l00554">timer_init()</a>.</p>

</div>
</div><p>
</div>
<!$Id: atmel-footer.html 19276 2009-11-23 09:04:48Z sschneid $>
<html>
 <head>
  <meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
  <title>@DOC_TITLE@</title>
  <link href="doxygen.css" rel="stylesheet" type="text/css">
</head>
<body>

<table width="100%" height="10%" bgcolor="#FFFFFF">
  <tr>
    <td colspan="6" height="1" background="..//img//blue.gif"></td>
  </tr>

  <tr>
    <td colspan="6">
    <address style="align: right;"><small>
Generated on Wed Feb 10 14:33:21 2010 for Platform Reference Manual - RCB230 V3.2 with ATmega1281 and AT86RF230 based on Sensor Terminal board by <a href="http://www.doxygen.org/index.html"><img src="doxygen.png" alt="doxygen" align="middle" border=0></a> 1.5.6</small></address>
    </td>
  </tr>

</table>
